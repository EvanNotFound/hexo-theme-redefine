{"version":3,"file":"imageViewer.js","names":["viewerState","isBigImage","scale","fitScale","userZoomed","isMouseDown","dragged","currentImgIndex","lastMouseX","lastMouseY","translateX","translateY","maskDom","targetImg","imageSelector","viewerControls","prevButton","nextButton","closeButton","imageNodes","didInitKeys","applyTransform","style","transform","fitToViewport","options","frame","querySelector","getBoundingClientRect","getFrameRect","marginFactor","imageRect","width","height","heightLimit","window","innerHeight","widthLimit","innerWidth","scaleForHeight","scaleForWidth","Math","min","showHandle","isShow","document","body","overflow","classList","toggle","closeViewer","updateImageNodes","Array","from","querySelectorAll","canGoPrev","canGoNext","max","length","updateNavButtons","updateViewerImage","index","currentImg","newSrc","src","hasAttribute","getAttribute","removeAttribute","alt","handleImageLoad","removeEventListener","complete","addEventListener","once","goPrev","goNext","handleArrowKeys","event","key","preventDefault","initImageViewer","signal","appSignal","console","warn","registerGlobalHandlers","zoomHandle","ctrlKey","rect","offsetX","clientX","left","offsetY","clientY","top","dx","dy","oldScale","minScale","maxScale","deltaY","abs","dragStartHandle","cursor","lastTime","dragHandle","currentTime","Date","getTime","deltaX","dragEndHandle","stopPropagation","handleImageClick","img","target","closest","indexOf","handleMaskClick","handlePrevClick","handleNextClick","handleCloseClick","handleResize","passive"],"sources":["0"],"mappings":"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","ignoreList":[]}