import _ from"./layouts/bookmarkNav.js";import o from"./layouts/categoryList.js";import t from"./layouts/essays.js";import e from"./layouts/lazyload.js";import{initTOC as s}from"./layouts/toc.js";import{navbarShrink as a}from"./layouts/navbarShrink.js";import r from"./plugins/masonry.js";import i from"./plugins/mermaid.js";import l from"./plugins/pangu.js";import n from"./plugins/tabs.js";import m from"./plugins/typed.js";import g from"./tools/codeBlock.js";import p from"./tools/lightDarkSwitch.js";import{initLocalSearchGlobals as c,initLocalSearchPage as h}from"./tools/localSearch.js";import f from"./tools/runtime.js";import u from"./tools/scrollTopBottom.js";import y from"./tools/imageViewer.js";import{initTocToggle as b}from"./tools/tocToggle.js";import{initUtilsGlobals as d,initUtilsPage as j}from"./utils.js";import{onBeforeContentReplace as k,onPageView as S,onReady as v,onVisitStart as N}from"./app/lifecycle.js";import{abortPageScope as T,createPageScope as x,getAppSignal as w}from"./app/pageScope.js";import{getStyleStatus as z,setStyleStatus as B,styleStatus as E}from"./state/styleStatus.js";const safeRun=(_,o)=>{try{o()}catch(o){console.error(`[redefine] ${_} failed:`,o)}};let F=!1;const initPage=()=>{const c=x(),u=w();safeRun("utils:page",()=>{j({signal:c})}),safeRun("modeToggle",()=>{p({signal:c,appSignal:u})}),safeRun("imageViewer",()=>{y({signal:c,appSignal:u})}),a.setNavigating(!1),a.refresh(),safeRun("footerRuntime",()=>{theme.footer?.runtime&&f()}),safeRun("toc",()=>{theme.articles?.toc?.enable&&s({signal:u})}),safeRun("tabs",()=>{theme.articles?.toc?.enable&&n({signal:u})}),safeRun("essays",()=>{"undefined"!=typeof moment&&t()}),safeRun("pangu",()=>{theme.articles?.pangu_js&&l()}),safeRun("mermaid",()=>{theme.plugins?.mermaid?.enable&&i()}),safeRun("masonry",()=>{(theme.masonry||theme.photos||theme.gallery||data?.masonry)&&r({signal:c})}),safeRun("typed",()=>{const _=theme.home_banner?.subtitle||{},o=_.text;(0!==(Array.isArray(o)?o:o?[o]:[]).length||_.hitokoto&&_.hitokoto.enable)&&location.pathname===config.root&&m("subtitle")}),safeRun("localSearch",()=>{!0===theme.navbar?.search?.enable&&h()}),safeRun("copyCode",()=>{!0===theme.articles?.code_block?.copy&&g()}),safeRun("lazyload",()=>{!0===theme.articles?.lazyload&&e()}),safeRun("bookmarkNav",()=>{theme.bookmarks&&0!==theme.bookmarks.length&&_({signal:u})}),safeRun("categoryList",()=>{o()})};export const main={themeInfo:{theme:`Redefine v${theme.version}`,author:"EvanNotFound",repository:"https://github.com/EvanNotFound/hexo-theme-redefine"},styleStatus:E,getStyleStatus:z,setStyleStatus:B,printThemeInfo:()=>{console.log('      ______ __  __  ______  __    __  ______                       \r\n     /\\__  _/\\ \\_\\ \\/\\  ___\\/\\ "-.\\/  \\/\\  ___\\                      \r\n     \\/_/\\ \\ \\  __ \\ \\  __\\ \\ \\-.\\ \\ \\  __\\                      \r\n        \\ \\_\\ \\_\\ \\_\\ \\_____\\ \\_\\ \\_\\ \\_____\\                    \r\n         \\/_/ \\/_/\\/_/\\/_____//\\/_/  \\/_/\\/_____//                    \r\n                                                               \r\n ______  ______  _____   ______  ______ __  __   __  ______    \r\n/\\  == \\/\\  ___\\/\\  __-.\\/\\  ___\\/\\  ___/\\ \\/\\ "-.\\ \\/\\  ___\\   \r\n\\ \\  __<\\ \\  __\\ \\ \\/\\ \\ \\  __\\ \\  __\\ \\ \\ \\-.  \\ \\  __\\   \r\n \\ \\_\\ \\_\\ \\_____\\ \\____-\\ \\_____\\ \\_\\  \\ \\_\\ \\_\\"\\_\\ \\_____\\ \r\n  \\/_/ /_/\\/_____//\\/____/ \\/_____//\\/_/   \\/_/\\/_/ \\/_/\\/_____//\r\n                                                               \r\n  Github: https://github.com/EvanNotFound/hexo-theme-redefine')},refresh:()=>{initPage()}};export function initMain(){main.printThemeInfo()}v(()=>{initMain(),(()=>{if(F)return;F=!0;const _=w();safeRun("utils:globals",()=>{d({signal:_})}),safeRun("navbar:globals",()=>{a.initGlobals({signal:_})}),safeRun("tocToggle:globals",()=>{b({signal:_})}),safeRun("scrollTopBottom:globals",()=>{u({signal:_})}),safeRun("tabs:globals",()=>{n({signal:_})}),safeRun("categoryList:globals",()=>{o({signal:_})}),safeRun("localSearch:globals",()=>{c({signal:_})})})()}),S(()=>{initPage()}),k(()=>{T()}),N(()=>{a.setNavigating(!0)});
//# sourceMappingURL=main.js.map